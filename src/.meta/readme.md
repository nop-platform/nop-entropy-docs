# 文档编写指南

由于会被一些工具自动化处理，在用 Markdown 编写文档时需尽可能规范些：

- 文档中的标题用 `#` 设置，每个文档都需要有一级标题且只能有一个；
- 代码块用连续的三个 <code>`</code> 表示，不要超过三个。

## 文档生成效果预览

首次操作时需在项目根目录 `npm i` 安装依赖，限制 Node.js 版本为 14 及以上。

接着用 `npm start` 启动本地服务，并在浏览器中访问 `http://localhost:4000/projects/nop-entropy/docs/` 查看效果。

在执行 `npm start` 时自动先处理 `/docs` 下的文件，成功后会生成 `/.knosys/sites/default/source/_data/knosys/project-nop-entropy/docs.yml` 文件，内容为文档总数及按文件目录结构排列的元数据。

值得注意的是——**`npm start` 后并未监听 `/docs` 下文件的变动，若文档源文件有修改需重新执行。**

## 文档站目录编排

需要展示在网站中的文档得将其信息添加进 `/docs/.meta/toc.yml` 中，数据结构如下：

```yml
- text: 节点一名称
  uri: 节点一路径
- text: 节点二名称
  children:
    - text: 节点二的第一个子节点名称
      uri: 节点二的第一个子节点路径
    - 节点二的第二个子节点路径
```

每个节点的数据类型可以是字符串或对象，当是字符串时代表是该节点的路径，是对象时的含义为：

| 键名 | 类型 | 必需 | 描述 |
| --- | --- | --- | --- |
| `text` | 字符串 | 有 `children` 时 | 节点名称，用于生成目录树，默认取文档中的标题 |
| `uri` | 字符串 | 无 `children` 时 | 相对于 `/docs` 或父节点的路径 |
| `children` | 数组 | 否 | 子节点 |
